<!DOCTYPE html>
<html>
<head>
	<title>Detail Admin - New User Form</title>
    
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	
    <!-- bootstrap -->
    <link href="../css/bootstrap/bootstrap.css" rel="stylesheet" />
    <link href="../css/bootstrap/bootstrap-responsive.css" rel="stylesheet" />
    <link href="../css/bootstrap/bootstrap-overrides.css" type="text/css" rel="stylesheet" />

    <!-- global styles -->
    <link rel="stylesheet" type="text/css" href="../css/layout.css" />
    <link rel="stylesheet" type="text/css" href="../css/elements.css" />
    <link rel="stylesheet" type="text/css" href="../css/icons.css" />

    <!-- libraries -->
    <link rel="stylesheet" type="text/css" href="../css/lib/font-awesome.css" />
    
    <!-- this page specific styles -->
    <link rel="stylesheet" href="../css/compiled/new-user.css" type="text/css" media="screen" />
    
    <!-- this page specific styles -->
    <link rel="stylesheet" href="../css/compiled/form-wizard.css" type="text/css" media="screen" />

    <!-- open sans font -->
    <!-- <link href='http://fonts.useso.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css' /> -->

    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /></head>
<body>

    <!-- navbar -->
    <div class="navbar navbar-inverse">
        <div class="navbar-inner">
            <button type="button" class="btn btn-navbar visible-phone" id="menu-toggler">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            
            <a class="brand" href="index.html"><img src="../img/logo.png" /></a>

            <ul class="nav pull-right">                
                <li class="hidden-phone">
                    <input class="search" type="text" />
                </li>
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle hidden-phone" data-toggle="dropdown">
                        <span id="email"></span>
                        <b class="caret"></b>
                    </a>
                    <ul class="dropdown-menu">
                        <li><a href="personal-info.html">个人信息</a></li>
                        <li><a href="#">修改密码</a></li>
                        <li><a href="#">意见反馈</a></li>
                    </ul>
                </li>
                <li class="settings hidden-phone">
                    <a href="../user/signout.do" role="button" data-toggle="tooltip" data-placement="bottom" title="注销">
                        <i class="icon-off"></i>
                    </a>
                </li>
            </ul>            
        </div>
    </div>
    <!-- end navbar -->

    <!-- sidebar -->
    <div id="sidebar-nav">
        <ul id="dashboard-menu">
            <li>                
                <a href="index.html">
                    <i class="icon-home"></i>
                    <span>首页</span>
                </a>
            </li>            
            <li>
                <a href="chart-showcase.html">
                    <i class="icon-signal"></i>
                    <span>导航</span>
                </a>
            </li>
            <li class="active">
                <div class="pointer">
                    <div class="arrow"></div>
                    <div class="arrow_border"></div>
                </div>
                <a class="dropdown-toggle" href="#">
                    <i class="icon-dashboard"></i>
                    <span>管理广告</span>
                    <i class="icon-chevron-down"></i>
                </a>
                <ul class="active submenu">
                    <li><a href="ads-list.do">广告列表</a></li>
                    <li><a href="new-ads.do" class="active">新增广告</a></li>
                </ul>
            </li>
            <li>
                <a href="personal-info.html">
                    <i class="icon-cog"></i>
                    <span>个人信息</span>
                </a>
            </li>
        </ul>
    </div>
    <!-- end sidebar -->


	<!-- main container -->
    <div class="content">
        
        <!-- settings changer -->
        <div class="skins-nav">
            <a href="#" class="skin first_nav selected">
                <span class="icon"></span><span class="text">Default</span>
            </a>
            <a href="#" class="skin second_nav" data-file="css/skins/dark.css">
                <span class="icon"></span><span class="text">Dark skin</span>
            </a>
        </div>
        
        <div class="container-fluid">
            <div id="pad-wrapper" class="new-user">
                <div class="row-fluid header">
                    <h3>新增广告</h3>
                </div>

                <div class="row-fluid form-wrapper">
                    <!-- left column -->
                    <div class="span9 with-sidebar">
                        <div class="container">
                        	<div class="alert alert-success hide">
					            <i class="icon-ok-sign"></i> 登陆成功，跳转中...
					        </div>
					        <div class="alert alert-error hide">
			                    <i class="icon-remove-sign"></i>登陆失败，请确认邮箱和密码.
			                </div>
                            <form id="form" class="new_user_form normal-input" method="post" action="saveAds.do">
                                <div class="span12 field-box control-group">
                                    <label class="control-label">应用包名:</label>
                                    <div class="controls">
	                                    <input class="span9" type="text" id="appPackage" name="appPackage" placeholder="应用包名" required 
	                                    pattern="[a-zA-Z0-9.]+" maxlength="50"/>
								    </div>
                                </div>
                                <div class="span12 field-box">
                                    <label>广告商:</label>
                                    <div class="ui-select span5">
                                        <select name="advertiser" id="advertiser">
                                            <option value="Admob">Admob</option>
                                            <option value="Mobvista">Mobvista</option>
                                            <option value="InMobi">InMobi</option>
                                            <option value="Keymob">Keymob</option>
                                            <option value="Amazon">Amazon</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="span12 field-box">
                                    <label>广告单元 ID:</label>
                                    <input class="span9" type="text" id="advertKey" name="advertKey" placeholder="广告单元 ID" required
                                    	pattern="[a-zA-Z0-9-]+" 
        								data-validation-pattern-message="Must start with 'a' and end with 'z'" maxlength="50"/>
                                </div>
                                <div class="span12 field-box">
                                    <label>广告类型:</label>
                                    <div class="ui-select span5">
                                        <select id="advertType" name="advertType">
                                            <option value="1">插页式广告</option>
                                            <option value="2">横幅广告</option>
                                            <option value="3">视频广告</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="span12 field-box textarea">
                                    <label>描述:</label>
                                    <textarea class="span9" id="description" name="description" placeholder="描述" maxlength="500"></textarea>
                                    <span class="charactersleft">广告商或广告类型无法满足需求，请联系：insist_wait@163.com</span>
                                </div>
                                <div class="span11 field-box actions">
                                    <input type="submit" class="btn-glow primary" data-loading-text="正在新增，稍后..." value="新增广告" />
                                    <span>OR</span>
                                    <input type="reset" value="重 置" class="reset" />
                                </div>
                            </form>
                        </div>
                    </div>

                    <!-- side right column -->
                    <div class="span3 form-sidebar pull-right">
                        <div class="btn-group toggle-inputs hidden-tablet">
                            <!-- <button class="glow left active" data-input="inline">INLINE INPUTS</button>
                            <button class="glow right" data-input="normal">NORMAL INPUTS</button> -->
                          	<h6> 友情提示：</h6>
                        </div>
                        <div class="alert alert-info hidden-tablet">
                            <i class="icon-lightbulb pull-left"></i>
                           	如果当前广告商或者广告类型无法满足你目前的需求，请联系系统管理员寻求帮助.
                           	<a href="mailto:insist_wait@163.com">insist_wait@163.com</a>
                        </div>                        
                        <h6>链接导航：</h6>
                        <!-- <p>Add multiple users at once</p>
                        <p>Choose one of the following file types:</p> -->
                        <ul>
                            <li><a href="#">Upload a vCard file</a></li>
                            <li><a href="#">Import from a CSV file</a></li>
                            <li><a href="#">Import from an Excel file</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- end main container -->


	<!-- scripts -->
    <script src="../js/jquery-latest.js"></script>
    <script src="../js/bootstrap.min.js"></script>
    <script src="../js/theme.js"></script>
    <script src="../js/common.js"></script>

    <script type="text/javascript">
        $(function () {
            var loading;
            $("#form").on("submit", function(e) {
				e.preventDefault();
				 var $form = $(e.target);
				/* $.post($form.attr('action') + "?t=" + parseInt(new Date().getTime()/1000), $form.serialize(), function(result, status) {
	                console.log(result);
	                if(result.returnCode == "200") {
                		$(".alert").eq(0).fadeIn();
	                	window.setTimeout(function() {
	                		$(".alert").eq(0).fadeOut();
	                		window.location.href = "ads-list.do";
	                	}, 1000);
	                } else {
	                	$(".alert").eq(1).fadeIn();
	                	window.setTimeout(function() {
	                		$(".alert").eq(1).fadeOut();
	                	}, 3000);
	                }
	            }, 'json'); */
	             loading = $("input[type='submit']").button('loading');
				 $.ajax({
					 url: $form.attr('action'),
					 type: 'POST',
					 data: $form.serialize(),
					 dataType: 'json',
					 async: true,
					 timeout: 5000,
					 error: function(){
					 	console.info('请求错误，用户未登陆');
					 },
					 success: function(result){
		                 if(result.returnCode == "200") {
	                		 $(".alert").eq(0).fadeIn();
		                	 window.setTimeout(function() {
		                	 	 $(".alert").eq(0).fadeOut();
		                		 window.location.href = "ads-list.do";
		                	 }, 1000);
		                 } else {
		                	 $(".alert").eq(1).fadeIn();
		                	 window.setTimeout(function() {
		                		 $(".alert").eq(1).fadeOut();
		                	 }, 3000);
		                 }
					  },
					  complete: function(XMLHttpRequest, textStatus) {
						  if(textStatus == "parsererror") {
							  window.location.href = "../signin.html";
						  }
					  }
				 });
			});

			$(document).ajaxComplete(function(event, jqXHR, options){
				loading.button('reset');
			});
        });
    </script>

</body>
</html>